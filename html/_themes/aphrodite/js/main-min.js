function forceDesktop(e){e.preventDefault();Mky.viewportSwitch()}function clearDesktop(e){e.preventDefault();Mky.viewportSwitch("width=device-width,initial-scale=1")}var Mky={setPreference:function(e,t,n){var r=this;if(typeof e!="string")throw new Error("Mky.setPreference: expecting param ‘preference’ to be type string.");if(typeof t!="string")throw new Error("Mky.setPreference: expecting param ‘value’ to be type string.");n=n||"session";switch(n){case"session":if(r.supports.sessionStorage()){sessionStorage.setItem(e,t);return!0}return!1;case"local":if(r.supports.localStorage()){localStorage.setItem(e,t);return!0}return!1}},getPreference:function(e,t){var n=this,r;if(typeof e!="string")throw new Error("Mky.getPreference: expecting param ‘preference’ to be type string.");t=t||"session";switch(t){case"session":if(n.supports.sessionStorage()){r=sessionStorage.getItem(e);return typeof r!="string"?"":r}return!1;case"local":if(n.supports.localStorage()){r=localStorage.getItem(e);return typeof r!="string"?"":r}return!1}},viewportSwitch:function(e){var t=this,n=document.getElementById("vp");e=e||"width=980";n&&n.setAttribute("content",e);t.setPreference("viewport",e,"session")},fetchContent:function(){},dom:{addClass:function(){},removeClass:function(){},toggleClass:function(){}},events:{addListener:function(e,t,n){if(typeof e!="object")throw new Error("Mky.event.addListener: expecting param ‘element’ to be type object.");if(typeof t!="string")throw new Error("Mky.event.addListener: expecting param ‘event’ to be type string.");if(typeof n!="function")throw new Error("Mky.event.addListener: expecting param ‘listener’ to be type function.");t=[t,"on"+t];if(e.addEventListener&&window.addEventListener){e.addEventListener(t[0],n,!1);return}if(e.attachEvent&&window.attachEvent){e.attachEvent(t[1],n);return}e.event[1]&&(e.event[1]=n)},removeListener:function(e,t,n){if(typeof e!="object")throw new Error("Mky.event.removeListener: expecting param ‘element’ to be type object.");if(typeof t!="string")throw new Error("Mky.event.removeListener: expecting param ‘event’ to be type string.");if(typeof n!="function")throw new Error("Mky.event.removeListener: expecting param ‘listener’ to be type function.");t=[t,"on"+t];if(e.removeEventListener&&window.removeEventListener){e.removeEventListener(t[0],n,!1);return}if(e.detachEvent&&window.detachEvent){e.detachEvent(t[1],n);return}e.event[1]&&(e.event[1]=null)}},supports:{touchEvents:function(){return"ontouchstart"in window},history:function(){return!!(window.history&&"pushState"in window.history&&"replaceState"in window.history&&"PopStateEvent"in window)},localStorage:function(){var e="localStorage";try{localStorage.setItem("supports",e);if(localStorage.getItem("supports")!==e)return!1;localStorage.removeItem("supports");return!0}catch(t){return!1}},sessionStorage:function(){var e="sessionStorage";try{sessionStorage.setItem("supports",e);if(sessionStorage.getItem("supports")!==e)return!1;sessionStorage.removeItem("supports");return!0}catch(t){return!1}}}};(function(){var t,n;t=function(){if(Mky.supports.sessionStorage()){var e=Mky.getPreference("viewport");typeof e=="string"&&Mky.viewportSwitch()}};n=function(){var e=document.querySelectorAll(".viewport-switch");for(i=0;i<e.length;i+=1)e[i].getAttribute("href").indexOf("vp=desktop")!==-1?Mky.events.addListener(e[i],"click",forceDesktop):e[i].getAttribute("href").indexOf("vp=initial")!==-1&&Mky.events.addListener(e[i],"click",clearDesktop)};t();n()})();